/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package smbtest;

import com.sun.net.httpserver.HttpServer;
import java.net.InetAddress;
import java.net.InetSocketAddress;

/**
 *
 * @author dev
 */
public class SmbTest {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        try {            
            InetSocketAddress addr = 
                    new InetSocketAddress(InetAddress.getLoopbackAddress(), 80);
            HttpServer server = HttpServer.create(addr, 10);

            server.createContext("/", new WebDavNtlmHandler());

            server.start();
            
            System.out.println("Started service");

            ProcessBuilder builder = new ProcessBuilder();
            builder.inheritIO();
            
            builder.command("RunDefenderScan.exe", "\\\\127.0.0.1\\abc");
            Process p = builder.start();
            p.waitFor();
            
            if(p.exitValue() != 0)
            {
                System.exit(1);
            }
            
            System.in.read();
            
            server.stop(1000);
        }
        catch(Throwable e) {
            e.printStackTrace(System.out);
        }        
    }
    
}
